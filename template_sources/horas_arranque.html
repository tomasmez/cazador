    <form action="/horas_arranque" method="POST">

<div id="horas_arranque" style="display: block;">
    <h3>Programa 1</h3>
    <label>
        <input type="checkbox" name="programa_1">
        Programa 1
    </label>
    <select name="programa_1_start_hour" id="startHourSelect1">
        <option value="1">1</option>
        <!-- Add more options for start hours -->
    </select>
    <select name="programa_1_start_minute" id="startMinuteSelect1">
        <option value="0">00</option>
        <!-- Add more options for start minutes -->
    </select>

    <h3>Programa 2</h3>
    <label>
        <input type="checkbox" name="programa_2">
        Programa 2
    </label>
    <select name="programa_2_start_hour" id="startHourSelect2">
        <option value="1">1</option>
        <!-- Add more options for start hours -->
    </select>
    <select name="programa_2_start_minute" id="startMinuteSelect2">
        <option value="0">00</option>
        <!-- Add more options for start minutes -->
    </select>

    <h3>Programa 3</h3>
    <label>
        <input type="checkbox" name="programa_3">
        Programa 3
    </label>
    <select name="programa_3_start_hour" id="startHourSelect3">
        <option value="1">1</option>
        <!-- Add more options for start hours -->
    </select>
    <select name="programa_3_start_minute" id="startMinuteSelect3">
        <option value="0">00</option>
        <!-- Add more options for start minutes -->
    </select>
</div>

<div id="calendario" style="display: block;">
    <h3>Dias habilitados </h3>
    <label>
        <input type="checkbox" name="lunes" checked>
        Lunes
    </label>
    <label>
        <input type="checkbox" name="martes" checked>
        Martes
    </label>
    <label>
        <input type="checkbox" name="miercoles" checked>
        Miercoles
    </label>
    <label>
        <input type="checkbox" name="jueves" checked>
        Jueves
    </label>
    <label>
        <input type="checkbox" name="viernes" checked>
        Viernes
    </label>
    <label>
        <input type="checkbox" name="sabado" checked>
        Sabado
    </label>
    <label>
        <input type="checkbox" name="domingo" checked>
        Domingo
    </label>
</div>

<input type="submit" value="Setear hora arranque">


    </form>

<script>
    
    // Function to create options for hours and minutes
    function createOptions(selectElement, start, end, defaultValue) {
        for (let value = start; value <= end; value++) {
            const option = document.createElement('option');
            option.value = value.toString().padStart(2, '0');
            option.textContent = option.value;
            if (option.value === defaultValue) {
                option.selected = true;
            }
            selectElement.appendChild(option);
        }
    }
    
    // Create options for the first set of dropdowns
    const hourSelect1 = document.getElementById('startHourSelect1');
    const minuteSelect1 = document.getElementById('startMinuteSelect1');
    createOptions(hourSelect1, 0, 23, '07');
    createOptions(minuteSelect1, 0, 59, '00');
    
    // Create options for the second set of dropdowns
    const hourSelect2 = document.getElementById('startHourSelect2');
    const minuteSelect2 = document.getElementById('startMinuteSelect2');
    createOptions(hourSelect2, 0, 23, '07');
    createOptions(minuteSelect2, 0, 59, '00');

    // Create options for the second set of dropdowns
    const hourSelect3 = document.getElementById('startHourSelect3');
    const minuteSelect3 = document.getElementById('startMinuteSelect3');
    createOptions(hourSelect3, 0, 23, '07');
    createOptions(minuteSelect3, 0, 59, '00');
    
</script>

<script>

    // Define the URL of the Flask endpoint
    const endpointUrl = '/return_json_file?file=riego_automatico.json';

    // Make a GET request to the Flask endpoint
    fetch(endpointUrl)
    .then(response => {
        if (!response.ok) {
        throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        // Filter the days that are active ("on")
        const activeDays = ['lunes', 'martes', 'miercoles', 'jueves', 'viernes', 'sabado', 'domingo']
        .filter(day => data[day] && data[day][0] === "on");
        const activeProgramas = ['programa_1','programa_2', 'programa_3']
        .filter(programa => data[programa] && data[programa][0] === "on");
        console.log('Active days:')
        console.log(activeDays)
        console.log('Active programas:')
        console.log(activeProgramas)

        // Update the HTML to show only active days
        const checkboxes_days = document.querySelectorAll('#calendario input[type="checkbox"]');
        checkboxes_days.forEach(checkbox_day => {
        const dayName = checkbox_day.name;
        console.log('checkbox name day: ' + dayName)
        if (!activeDays.includes(dayName)) {
            checkbox_day.checked = false; // Uncheck inactive days
        }
        else
        {
            checkbox_day.checked = true;
        }
        });

        // Update the HTML to show only active programas
        const checkboxes_programas = document.querySelectorAll('#horas_arranque input[type="checkbox"]');
        checkboxes_programas.forEach(checkbox_programa => {
        const programaName = checkbox_programa.name;
        console.log('checkbox name programa: ' + programaName)
        if (!activeProgramas.includes(programaName)) {
            checkbox_programa.checked = false; // Uncheck inactive days
        }
        else
        {
            checkbox_programa.checked = true;
        }
        });



    })
    .catch(error => {
        console.error('There was a problem with the fetch operation:', error);
    });

    </script>


</body>
</html>
